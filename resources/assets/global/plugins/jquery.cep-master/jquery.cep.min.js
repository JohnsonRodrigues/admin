/**
 * jQuery CEP plugin v0.3
 * https://github.com/shakegioh/jquery.cep
 */
!function(t){function e(t){return t.toString().replace(/\D/g,"").substr(0,8)}function n(t){var n="",r=e(t);return n=r.length>5?r.substr(0,5)+"-"+r.substr(5,3):r}function r(e,n){t("["+n+"]").each(function(){var r=t(this),a=r.attr(n);e[a]?r.val(e[a]):r.val(""),r.trigger("change")})}function a(t){return t.endereco="",t.tipo_logradouro&&(t.endereco+=t.tipo_logradouro+" "),t.endereco+=t.logradouro,t}t.fn.cep=function(o){var u={autofill:!0,autofill_attr:"data-cep",ajax:{url:"http://cep.republicavirtual.com.br/web_cep.php",requestParse:function(t){return t},responseParse:a},init:function(){},done:function(){}};return"object"==typeof o?u=t.extend(u,o):"function"==typeof o&&(u.done=o),this.each(function(){var a=t(this),o=null;a.on("keyup",function(c){var i=c.keyCode||c.which,l=a.val(),p=e(l),s=n(l);if(!(i>=37&&40>=i)&&(l.length>8||!o||o!=s)&&(o=s,a.val(s),8===p.length)){a.attr("disabled",!0),u.init(a);var f={formato:"json",cep:p};f=u.ajax.requestParse(f),t.get(u.ajax.url,f,function(t){var e=u.ajax.responseParse(t);u.autofill&&r(e,u.autofill_attr),u.done(a,t)}).always(function(){a.attr("disabled",!1)})}})}),this},t(document).ready(function(){t('[role="cep"]').each(function(){var e=t(this),n={autofill:!0,autofill_attr:null!=e.attr("cep-att")?e.attr("cep-att"):"data-cep",ajax:{url:null!=e.attr("cep-ajax-url")?e.attr("cep-ajax-url"):"http://cep.republicavirtual.com.br/web_cep.php",requestParse:null!=e.attr("cep-ajax-requestParse")?function(t){return window[e.attr("cep-ajax-requestParse")](t)}:function(t){return t},responseParse:null!=e.attr("cep-ajax-responseParse")?function(t){return window[e.attr("cep-ajax-responseParse")](t)}:a},init:null!=e.attr("cep-init")?function(t){window[e.attr("cep-init")](t)}:function(){},done:null!=e.attr("cep-done")?function(t,n){window[e.attr("cep-done")](t,n)}:function(){}};e.cep(n)})})}(jQuery);
